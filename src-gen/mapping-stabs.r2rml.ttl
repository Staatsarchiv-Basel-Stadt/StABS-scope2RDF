PREFIX rr: <http://www.w3.org/ns/r2rml#>
PREFIX rico: <https://www.ica.org/standards/RiC/ontology#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

<#rr_stabs>
	rr:logicalTable [ rr:sqlQuery """SELECT TITEL, SIGNATUR, STUFE, ENTSTEHUNGSZEITRAUM, DARIN, ARCHIVALIENART, ENTHAELT, ZUGANGS_UND_BENUTZUNGSBEDINGUN, RECHTSSTATUS, ZUGANGSBESTIMMUNGEN, SPRACHE, FORM_UND_INHALT, ID_NR, PARENT_ID_NR, HIERARCHIE_PFAD, SCHUTZFRISTENDE, ZUGAENGLICHKEIT_NM FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:RecordResource ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:title ;
		rr:objectMap [
			rr:column "TITEL" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:identifier ;
		rr:objectMap [
			rr:column "SIGNATUR" ;
			rr:language "zxx" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:date ;
		rr:objectMap [
			rr:column "ENTSTEHUNGSZEITRAUM" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:scopeAndContent ;
		rr:objectMap [
			rr:column "DARIN" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:scopeAndContent ;
		rr:objectMap [
			rr:column "ENTHAELT" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:type ;
		rr:objectMap [
			rr:column "ARCHIVALIENART" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:conditionsOfAccess ;
		rr:objectMap [
			rr:column "ZUGANGSBESTIMMUNGEN" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:conditionsOfUse ;
		rr:objectMap [
			rr:column "ZUGAENGLICHKEIT_NM" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:hasOrHadIdentifier ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}/identity" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isAssociatedWithDate ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}/daterange" ;
		];
	]
.
<#inst_dossier>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR, ANZAHL, TECHNIK FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Dossier'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Instantiation/{ID_NR}" ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:physicalOrLogicalExtent ;
		rr:objectMap [
			rr:column "ANZAHL" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:productionTechnique ;
		rr:objectMap [
			rr:column "TECHNIK" ;
		];
	]
.
<#inst_dokument>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR, ANZAHL, TECHNIK FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Dokument'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Instantiation/{ID_NR}" ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:physicalOrLogicalExtent ;
		rr:objectMap [
			rr:column "ANZAHL" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:productionTechnique ;
		rr:objectMap [
			rr:column "TECHNIK" ;
		];
	]
.
<#level_archive>
	rr:logicalTable [ rr:sqlQuery """SELECT * FROM MVK_OGD_VRZNG_ENHT_1 WHERE ID_NR = 548575""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:RecordSet ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:title ;
		rr:objectMap [
			rr:column "TITEL" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:identifier ;
		rr:objectMap [
			rr:column "SIGNATUR" ;
			rr:language "zxx" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:history ;
		rr:objectMap [
			rr:column "ARCHIVGESCHICHTE" ;
			rr:language "ger" ;
		];
	]
.
<#level_abt>
	rr:logicalTable [ rr:sqlQuery """SELECT * FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE like 'Abteilung'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:RecordSet ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasRecordSetType ;
		rr:objectMap [
			rr:constant <http://ld.staatsarchiv.bs.ch/vocabularies/recordSetTypes#Abteilung> ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isOrWasIncludedIn ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{PARENT_ID_NR}" ;
		];
	]
.
<#level_fonds>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR, AKTENBILDNER_PROVENIENZ_TEXT FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Fonds'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:RecordSet ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasRecordSetType ;
		rr:objectMap [
			rr:constant <http://ld.staatsarchiv.bs.ch/vocabularies/recordSetTypes#Fonds> ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isOrWasIncludedIn ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{PARENT_ID_NR}" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:hasProvenance ;
		rr:objectMap [
			rr:column "AKTENBILDNER_PROVENIENZ_TEXT" ;
			rr:language "ger" ;
		];
	]
.
<#level_best>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR, AKTENBILDNER_PROVENIENZ_TEXT FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Bestand'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:RecordSet ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasRecordSetType ;
		rr:objectMap [
			rr:constant <http://ld.staatsarchiv.bs.ch/vocabularies/recordSetTypes#Bestand> ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isOrWasIncludedIn ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{PARENT_ID_NR}" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:hasProvenance ;
		rr:objectMap [
			rr:column "AKTENBILDNER_PROVENIENZ_TEXT" ;
			rr:language "ger" ;
		];
	]
.
<#level_series>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Serie'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:RecordSet ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasRecordSetType ;
		rr:objectMap [
			rr:constant <http://ld.staatsarchiv.bs.ch/vocabularies/recordSetTypes#Serie> ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isOrWasIncludedIn ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{PARENT_ID_NR}" ;
		];
	]
.
<#level_dossier>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR, ANZAHL, TECHNIK FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Dossier'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:Record ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasRecordSetType ;
		rr:objectMap [
			rr:constant <http://ld.staatsarchiv.bs.ch/vocabularies/recordSetTypes#Dossier> ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isOrWasIncludedIn ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{PARENT_ID_NR}" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:hasInstantiation ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Instantiation/{ID_NR}" ;
		];
	]
.
<#level_dokument>
	rr:logicalTable [ rr:sqlQuery """SELECT ID_NR, PARENT_ID_NR, ANZAHL, TECHNIK FROM MVK_OGD_VRZNG_ENHT_1 WHERE HIERARCHIE_PFAD LIKE '00000796390000548575%' and STUFE LIKE 'Dokument'""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:Record ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasRecordSetType ;
		rr:objectMap [
			rr:constant <http://ld.staatsarchiv.bs.ch/vocabularies/recordSetTypes#Dokument> ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isOrWasIncludedIn ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{PARENT_ID_NR}" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:hasInstantiation ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Instantiation/{ID_NR}" ;
		];
	]
.
<#desc_agent>
	rr:logicalTable [ rr:sqlQuery """SELECT * FROM MVK_OGD_DSKRP_1""" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR}" ;
		rr:class rico:Record ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:title ;
		rr:objectMap [
			rr:column "BEZEICHNUNG" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:descriptiveNote ;
		rr:objectMap [
			rr:column "BESCHREIBUNG" ;
			rr:language "ger" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:hasDocumentaryFormType ;
		rr:objectMap [
			rr:constant <https://www.ica.org/standards/RiC/vocabularies/documentaryFormTypes#AuthorityRecord> ;
		];
	]
.
<#rr2authrec>
	rr:logicalTable [ rr:tableName "MVK_OGD_VE_DSKRP_BZHNG_1" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR_VRZNG_ENHT}" ;
		rr:class rico:RecordResource ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:hasOrHadMainSubject ;
		rr:objectMap [
			rr:template "http://ld.staatsarchiv.bs.ch/Record/{ID_NR_DSKRP}" ;
		];
	]
.
<#abl>
	rr:logicalTable [ rr:tableName "MVK_OGD_ABLFR_1" ];
	
	rr:subjectMap [
		rr:template "http://ld.staatsarchiv.bs.ch/Event/{ID_NR}" ;
		rr:class rico:Activity ;
	];
	
	rr:predicateObjectMap [
		rr:predicate rico:name ;
		rr:objectMap [
			rr:template "Ablieferung Nr. {JAHR_LAUF_NR}" ;
			rr:termType rr:Literal ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:identifier ;
		rr:objectMap [
			rr:column "ID_NR" ;
			rr:datatype xsd:integer ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:type ;
		rr:objectMap [
			rr:template "{TYP} - {SUBTYP}" ;
			rr:termType rr:Literal ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:agentOrActivityIsTargetOfProvenanceRelation ;
		rr:objectMap [
			rr:column "AKTENBILDENDE_STELLE" ;
		];
	];
	rr:predicateObjectMap [
		rr:predicate rico:isAssociatedWithDate ;
		rr:objectMap [
			rr:column "ZEITRAUM_PERIODE" ;
		];
	]
.